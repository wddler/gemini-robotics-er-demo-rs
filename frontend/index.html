<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini Robotics</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <div class="container">
        <h1>Gemini Robotics Web Server</h1>

        <div class="image-section">
            <div id="placeholder">
                <img id="imgPreview" src="" alt="Preview"
                    style="display:none; width: 100%; height: 100%; object-fit: contain;" />
                <video id="video" autoplay playsinline
                    style="display:none; width: 100%; height: 100%; object-fit: cover;"></video>
                <canvas id="canvas" width="640" height="480" style="display:none;"></canvas>
                <span id="placeholderText">No image selected</span>
                <canvas id="canvasOverlay"
                    style="display:none; position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none;"></canvas>
            </div>

            <div class="controls">
                <input type="file" id="fileInput" accept="image/*" />
                <button id="uploadFileBtn">Upload File</button>
                <button id="openCamBtn">Open Camera</button>
                <button id="captureBtn" style="display:none;">Capture</button>
                <button id="closeCamBtn" style="display:none;">Close Camera</button>
            </div>
        </div>

        <div id="response" style="color: green; text-align: center; margin-bottom: 1rem;"></div>

        <div class="input-section">
            <label for="message">Prompt:</label>
            <textarea id="message" name="message">Point to no more than 10 items in the image. 
The label returned should be an identifying name for the object detected. 
The answer should follow the json format: [{"point": [y, x], "label": <label1>}, ...].
The points are in [y, x] format normalized to 0-1000.</textarea>
            <button id="sendBtn">Send to Gemini</button>
        </div>

        <div id="results" style="display:none;">
            <h3>Detection Results:</h3>
            <pre id="resultsJson"></pre>
        </div>
    </div>

    <script type="module" src="/static/app.js"></script>
</body>

</html>